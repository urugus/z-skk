# 要件

- zsh で SKK と同様の入力体験を得られること
- zinit でプラグインとしてインストールできること

## SKK入力モード仕様

### 入力モード一覧

1. **かなモード** - ひらがな入力（デフォルト）
2. **カナモード** - カタカナ入力
3. **英数モード** - 直接入力（ASCII）
4. **全英モード** - 全角英数入力
5. **Abbrevモード** - 略語展開モード

### モード切り替えキー

- `C-j` - かなモードへ切り替え
- `q` - カナモードへ切り替え（かなモード時）
- `l` / `L` - 英数モードへ切り替え（かなモード時）
- `/` - Abbrevモードへ切り替え（かなモード時）
- `C-q` - 全英モードへ切り替え

### 変換関連キー

- `Shift` - 変換開始（sticky shift）
  - 大文字入力で変換モード開始
  - 例: `Kanji` → 「かんじ」の変換候補表示
- `Space` - 次の変換候補
- `x` - 前の変換候補
- `C-g` - 変換キャンセル
- `Enter` - 変換確定

### 特殊キー操作

- `X` - 前の文字をカタカナに変換（かなモード時）
- `>` - 接尾辞入力開始
- `?` - 接頭辞入力開始
- `;` - コード入力（JISコード等）
- `@` - 今日の日付入力

### 辞書登録

- 変換候補がない場合、自動的に辞書登録モードへ
- 読みと漢字を入力して登録
- 個人辞書は `~/.skk-jisyo` に保存

### 辞書設定

辞書ファイルのパスは環境変数で設定可能:

- `SKK_JISYO_PATH` - 個人辞書のパス（デフォルト: `~/.skk-jisyo`）
- `SKK_USER_JISYO_PATH` - ユーザー辞書のパス（デフォルト: `~/.skk-user-jisyo`）

設定例（`.zshrc` に追加）:
```bash
export SKK_JISYO_PATH="$HOME/.config/skk/jisyo"
export SKK_USER_JISYO_PATH="$HOME/.config/skk/user-jisyo"
```

### 送り仮名の処理

- 送り仮名付き変換: 大文字→小文字で送り仮名開始
  - 例: `OkuRi` → 「送り」の変換（送り仮名「り」）
- `*` を送り仮名の位置に挿入して明示的に指定も可能

## 表示仕様

### マーカー記号

- **▽** - かな入力中・変換前の状態を示すマーカー
  - 大文字入力開始時に表示
  - 例: `Kanji` 入力中 → `▽かんじ`
  
- **▼** - 変換候補選択中を示すマーカー
  - Spaceキー押下で変換開始時に表示
  - 例: `▽かんじ` → Space → `▼漢字`

### 入力状態の表示例

1. **通常入力**
   ```
   $ nihongo
   → にほんご
   ```

2. **変換入力開始**
   ```
   $ Nihongo
   → ▽にほんご
   ```

3. **変換候補選択**
   ```
   $ Nihongo [Space]
   → ▼日本語
   ```

4. **送り仮名付き入力**
   ```
   $ OkuRi
   → ▽おくり
   $ OkuRi [Space]
   → ▼送り
   ```

### モード表示

各モードでのプロンプト表示（実装時の参考）:
- かなモード: `[あ]` または表示なし
- カナモード: `[ア]`
- 英数モード: `[_A]`
- 全英モード: `[Ａ]`
- Abbrevモード: `[aA]`


