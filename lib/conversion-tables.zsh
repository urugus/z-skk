#!/usr/bin/env zsh
# Conversion tables for z-skk

# Hiragana to Katakana conversion table
typeset -gA Z_SKK_HIRAGANA_TO_KATAKANA=(
    # あ行
    [あ]="ア" [い]="イ" [う]="ウ" [え]="エ" [お]="オ"
    # か行
    [か]="カ" [き]="キ" [く]="ク" [け]="ケ" [こ]="コ"
    # が行
    [が]="ガ" [ぎ]="ギ" [ぐ]="グ" [げ]="ゲ" [ご]="ゴ"
    # さ行
    [さ]="サ" [し]="シ" [す]="ス" [せ]="セ" [そ]="ソ"
    # ざ行
    [ざ]="ザ" [じ]="ジ" [ず]="ズ" [ぜ]="ゼ" [ぞ]="ゾ"
    # た行
    [た]="タ" [ち]="チ" [つ]="ツ" [て]="テ" [と]="ト"
    # だ行
    [だ]="ダ" [ぢ]="ヂ" [づ]="ヅ" [で]="デ" [ど]="ド"
    # な行
    [な]="ナ" [に]="ニ" [ぬ]="ヌ" [ね]="ネ" [の]="ノ"
    # は行
    [は]="ハ" [ひ]="ヒ" [ふ]="フ" [へ]="ヘ" [ほ]="ホ"
    # ば行
    [ば]="バ" [び]="ビ" [ぶ]="ブ" [べ]="ベ" [ぼ]="ボ"
    # ぱ行
    [ぱ]="パ" [ぴ]="ピ" [ぷ]="プ" [ぺ]="ペ" [ぽ]="ポ"
    # ま行
    [ま]="マ" [み]="ミ" [む]="ム" [め]="メ" [も]="モ"
    # や行
    [や]="ヤ" [ゆ]="ユ" [よ]="ヨ"
    # ら行
    [ら]="ラ" [り]="リ" [る]="ル" [れ]="レ" [ろ]="ロ"
    # わ行
    [わ]="ワ" [ゐ]="ヰ" [ゑ]="ヱ" [を]="ヲ" [ん]="ン"
    # 小文字
    [ぁ]="ァ" [ぃ]="ィ" [ぅ]="ゥ" [ぇ]="ェ" [ぉ]="ォ"
    [ゃ]="ャ" [ゅ]="ュ" [ょ]="ョ" [ゎ]="ヮ" [っ]="ッ"
    # その他
    [ー]="ー"
)

# ASCII to Zenkaku (full-width) conversion table
typeset -gA Z_SKK_ASCII_TO_ZENKAKU=(
    # Numbers
    [0]="０" [1]="１" [2]="２" [3]="３" [4]="４"
    [5]="５" [6]="６" [7]="７" [8]="８" [9]="９"

    # Uppercase letters
    [A]="Ａ" [B]="Ｂ" [C]="Ｃ" [D]="Ｄ" [E]="Ｅ" [F]="Ｆ" [G]="Ｇ"
    [H]="Ｈ" [I]="Ｉ" [J]="Ｊ" [K]="Ｋ" [L]="Ｌ" [M]="Ｍ" [N]="Ｎ"
    [O]="Ｏ" [P]="Ｐ" [Q]="Ｑ" [R]="Ｒ" [S]="Ｓ" [T]="Ｔ" [U]="Ｕ"
    [V]="Ｖ" [W]="Ｗ" [X]="Ｘ" [Y]="Ｙ" [Z]="Ｚ"

    # Lowercase letters
    [a]="ａ" [b]="ｂ" [c]="ｃ" [d]="ｄ" [e]="ｅ" [f]="ｆ" [g]="ｇ"
    [h]="ｈ" [i]="ｉ" [j]="ｊ" [k]="ｋ" [l]="ｌ" [m]="ｍ" [n]="ｎ"
    [o]="ｏ" [p]="ｐ" [q]="ｑ" [r]="ｒ" [s]="ｓ" [t]="ｔ" [u]="ｕ"
    [v]="ｖ" [w]="ｗ" [x]="ｘ" [y]="ｙ" [z]="ｚ"

    # Special characters
    [" "]="　" ["!"]="！" ['"']="＂" ["#"]="＃" ['$']="＄"
    ["%"]="％" ["&"]="＆" ["'"]="＇" ["("]="（" [")"]="）"
    ["*"]="＊" ["+"]="＋" [","]="，" ["-"]="－" ["."]="．"
    ["/"]="／" [":"]="：" [";"]="；" ["<"]="＜" ["="]="＝"
    [">"]="＞" ["?"]="？" ["@"]="＠" ["["]="［" ["\\"]="＼"
    ["]"]="］" ["^"]="＾" ["_"]="＿" ['`']="｀" ["{"]="｛"
    ["|"]="｜" ["}"]="｝" ["~"]="～"
)

# JIS code to character mapping (common characters)
typeset -gA Z_SKK_JIS_TO_CHAR=(
    # Hiragana
    ["3042"]="あ" ["3044"]="い" ["3046"]="う" ["3048"]="え" ["304a"]="お"
    ["304b"]="か" ["304d"]="き" ["304f"]="く" ["3051"]="け" ["3053"]="こ"
    ["3055"]="さ" ["3057"]="し" ["3059"]="す" ["305b"]="せ" ["305d"]="そ"
    ["305f"]="た" ["3061"]="ち" ["3064"]="つ" ["3066"]="て" ["3068"]="と"
    ["306a"]="な" ["306b"]="に" ["306c"]="ぬ" ["306d"]="ね" ["306e"]="の"
    ["306f"]="は" ["3072"]="ひ" ["3075"]="ふ" ["3078"]="へ" ["307b"]="ほ"
    ["307e"]="ま" ["307f"]="み" ["3080"]="む" ["3081"]="め" ["3082"]="も"
    ["3084"]="や" ["3086"]="ゆ" ["3088"]="よ"
    ["3089"]="ら" ["308a"]="り" ["308b"]="る" ["308c"]="れ" ["308d"]="ろ"
    ["308f"]="わ" ["3092"]="を" ["3093"]="ん"

    # Katakana
    ["30a2"]="ア" ["30a4"]="イ" ["30a6"]="ウ" ["30a8"]="エ" ["30aa"]="オ"
    ["30ab"]="カ" ["30ad"]="キ" ["30af"]="ク" ["30b1"]="ケ" ["30b3"]="コ"
    ["30b5"]="サ" ["30b7"]="シ" ["30b9"]="ス" ["30bb"]="セ" ["30bd"]="ソ"
    ["30bf"]="タ" ["30c1"]="チ" ["30c4"]="ツ" ["30c6"]="テ" ["30c8"]="ト"
    ["30ca"]="ナ" ["30cb"]="ニ" ["30cc"]="ヌ" ["30cd"]="ネ" ["30ce"]="ノ"
    ["30cf"]="ハ" ["30d2"]="ヒ" ["30d5"]="フ" ["30d8"]="ヘ" ["30db"]="ホ"
    ["30de"]="マ" ["30df"]="ミ" ["30e0"]="ム" ["30e1"]="メ" ["30e2"]="モ"
    ["30e4"]="ヤ" ["30e6"]="ユ" ["30e8"]="ヨ"
    ["30e9"]="ラ" ["30ea"]="リ" ["30eb"]="ル" ["30ec"]="レ" ["30ed"]="ロ"
    ["30ef"]="ワ" ["30f2"]="ヲ" ["30f3"]="ン"

    # Common Kanji
    ["6f22"]="漢" ["5b57"]="字" ["65e5"]="日" ["672c"]="本" ["8a9e"]="語"
    ["4eba"]="人" ["5927"]="大" ["5c0f"]="小" ["4e2d"]="中" ["4e0a"]="上"
    ["4e0b"]="下" ["5de6"]="左" ["53f3"]="右" ["524d"]="前" ["5f8c"]="後"
)

# Romaji to Hiragana conversion table
typeset -gA Z_SKK_ROMAJI_TO_HIRAGANA=(
    # Vowels
    [a]="あ"  [i]="い"  [u]="う"  [e]="え"  [o]="お"

    # K-row
    [ka]="か" [ki]="き" [ku]="く" [ke]="け" [ko]="こ"
    [kya]="きゃ" [kyu]="きゅ" [kyo]="きょ"

    # G-row
    [ga]="が" [gi]="ぎ" [gu]="ぐ" [ge]="げ" [go]="ご"
    [gya]="ぎゃ" [gyu]="ぎゅ" [gyo]="ぎょ"

    # S-row
    [sa]="さ" [shi]="し" [si]="し" [su]="す" [se]="せ" [so]="そ"
    [sha]="しゃ" [shu]="しゅ" [sho]="しょ"
    [sya]="しゃ" [syu]="しゅ" [syo]="しょ"  # Alternative spellings

    # Z-row
    [za]="ざ" [ji]="じ" [zi]="じ" [zu]="ず" [ze]="ぜ" [zo]="ぞ"
    [ja]="じゃ" [ju]="じゅ" [jo]="じょ"
    [zya]="じゃ" [zyu]="じゅ" [zyo]="じょ"  # Alternative spellings

    # T-row
    [ta]="た" [chi]="ち" [ti]="ち" [tsu]="つ" [tu]="つ" [te]="て" [to]="と"
    [cha]="ちゃ" [chu]="ちゅ" [cho]="ちょ"
    [tya]="ちゃ" [tyu]="ちゅ" [tyo]="ちょ"  # Alternative spellings

    # D-row
    [da]="だ" [di]="ぢ" [du]="づ" [de]="で" [do]="ど"

    # N-row
    [na]="な" [ni]="に" [nu]="ぬ" [ne]="ね" [no]="の"
    [nya]="にゃ" [nyu]="にゅ" [nyo]="にょ"

    # H-row
    [ha]="は" [hi]="ひ" [hu]="ふ" [he]="へ" [ho]="ほ"
    [fu]="ふ"  # Alternative for 'hu'
    [hya]="ひゃ" [hyu]="ひゅ" [hyo]="ひょ"

    # B-row
    [ba]="ば" [bi]="び" [bu]="ぶ" [be]="べ" [bo]="ぼ"
    [bya]="びゃ" [byu]="びゅ" [byo]="びょ"

    # P-row
    [pa]="ぱ" [pi]="ぴ" [pu]="ぷ" [pe]="ぺ" [po]="ぽ"
    [pya]="ぴゃ" [pyu]="ぴゅ" [pyo]="ぴょ"

    # M-row
    [ma]="ま" [mi]="み" [mu]="む" [me]="め" [mo]="も"
    [mya]="みゃ" [myu]="みゅ" [myo]="みょ"

    # Y-row
    [ya]="や" [yu]="ゆ" [yo]="よ"

    # R-row
    [ra]="ら" [ri]="り" [ru]="る" [re]="れ" [ro]="ろ"
    [rya]="りゃ" [ryu]="りゅ" [ryo]="りょ"

    # W-row
    [wa]="わ" [wi]="ゐ" [we]="ゑ" [wo]="を"

    # N
    [n]="ん" [nn]="ん" ["n'"]="ん"

    # Small characters
    [xtsu]="っ" [xtu]="っ" [ltsu]="っ" [ltu]="っ"
    [xa]="ぁ" [xi]="ぃ" [xu]="ぅ" [xe]="ぇ" [xo]="ぉ"
    [la]="ぁ" [li]="ぃ" [lu]="ぅ" [le]="ぇ" [lo]="ぉ"
    [xya]="ゃ" [xyu]="ゅ" [xyo]="ょ"
    [lya]="ゃ" [lyu]="ゅ" [lyo]="ょ"
    [xwa]="ゎ" [lwa]="ゎ"

    # Special characters
    [-]="ー"
    [,]="、"
    [.]="。"
)

# Optimized conversion functions using tables
z-skk-hiragana-to-katakana-fast() {
    local hiragana="$1"
    echo "${Z_SKK_HIRAGANA_TO_KATAKANA[$hiragana]:-}"
}

z-skk-convert-to-zenkaku-fast() {
    local char="$1"
    echo "${Z_SKK_ASCII_TO_ZENKAKU[$char]:-$char}"
}

z-skk-jis-to-char-fast() {
    local code="$1"
    echo "${Z_SKK_JIS_TO_CHAR[$code]:-}"
}